function updateImageButtonStyles() {
    if (uploadedImage && originalImageData) {
        // Process the image with current filters
        const processedImageDataUrl = processImage();
        imageButtonImg.src = processedImageDataUrl;

        imageButton.style.display = 'inline-block';

        // Apply CSS Filters
        const brightness = imageBrightness.value;
        const contrast = imageContrast.value;
        const hue = imageHue.value;
        const saturation = imageSaturation.value;
        const opacity = imageOpacity.value;
        const blur = imageBlur.value;

        let filterCSS = `
            brightness(${brightness}%)
            contrast(${contrast}%)
            hue-rotate(${hue}deg)
            saturate(${saturation}%)
            opacity(${opacity}%)
            blur(${blur}px)
        `;

        // Apply Shadow Effect if enabled
        if (imageShadowEffect.checked) {
            const xOffset = imageShadowXOffset.value;
            const yOffset = imageShadowYOffset.value;
            const shadowBlur = imageShadowBlur.value;
            const color = imageShadowColor.value;
            filterCSS += ` drop-shadow(${xOffset}px ${yOffset}px ${shadowBlur}px ${color})`;
        }

        // Apply Transformations
        const resizePercentage = parseInt(imageResizePercentage.value);
        const resizeScale = isNaN(resizePercentage) ? 1 : resizePercentage / 100;
        const transform = `scale(${flipHorizontal * resizeScale}, ${flipVertical * resizeScale}) rotate(${rotationAngle}deg)`;

        // Apply Manual Size if specified
        if (imageWidth.value) {
            imageButton.style.width = `${imageWidth.value}px`;
        } else {
            imageButton.style.width = 'auto';
        }
        if (imageHeight.value) {
            imageButton.style.height = `${imageHeight.value}px`;
        } else {
            imageButton.style.height = 'auto';
        }

        // Position Image Text
        const offsetX = parseInt(textOffsetX.value) || 0;
        const offsetY = parseInt(textOffsetY.value) || 0;
        imageText.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
        imageText.textContent = imageButtonText.value;

        // Show or Hide Image Text based on checkbox
        imageText.style.display = showImageText.checked ? 'block' : 'none';

        // Generate CSS for imageButtonImg and its hover/active states
        let css = '';
        css += '#imageButtonImg {\n';
        css += `  filter: ${filterCSS};\n`;
        css += `  transform: ${transform};\n`;
        css += '  transition: filter 0.3s ease;\n';
        css += '}\n';

        // Hover State (Increase Brightness by 10%)
        css += '#imageButton:hover #imageButtonImg {\n';
        css += `  filter: brightness(${brightness * 1.1}%)
            contrast(${contrast}%)
            hue-rotate(${hue}deg)
            saturate(${saturation}%)
            opacity(${opacity}%)
            blur(${blur}px)
            ${imageShadowEffect.checked ? `drop-shadow(${imageShadowXOffset.value}px ${imageShadowYOffset.value}px ${imageShadowBlur.value}px ${imageShadowColor.value})` : ''}
        ;\n`;
        css += '}\n';

        // Active State (Decrease Brightness by 15%)
        css += '#imageButton:active #imageButtonImg {\n';
        css += `  filter: brightness(${brightness * 0.85}%)
            contrast(${contrast}%)
            hue-rotate(${hue}deg)
            saturate(${saturation}%)
            opacity(${opacity}%)
            blur(${blur}px)
            ${imageShadowEffect.checked ? `drop-shadow(${imageShadowXOffset.value}px ${imageShadowYOffset.value}px ${imageShadowBlur.value}px ${imageShadowColor.value})` : ''}
        ;\n`;
        css += '}\n';

        // Apply CSS
        dynamicStyles.textContent = css;
    }
}
